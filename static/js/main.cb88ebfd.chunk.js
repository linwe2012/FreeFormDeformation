(this["webpackJsonpffd-ts"]=this["webpackJsonpffd-ts"]||[]).push([[0],{54:function(e,t,n){e.exports=n(64)},59:function(e,t,n){},60:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(11),r=n.n(i),c=(n(59),n(44)),s=n(37),l=(n(60),n(47)),u=n(3),p=n(6),h=function(){function e(t,n,o,a){var i=this;Object(u.a)(this,e),this.canvas=null,this.w=0,this.h=0,this.pickPosition={x:0,y:0},this.frame=null,this.clearPickPosition(),this.canvas=n,this.w=t.clientWidth,this.h=t.clientHeight,t.appendChild(n),t.mouseout=function(){return i.clearPickPosition()},this.frame=t,window.addEventListener("resize",(function(e){i.w=i.frame.clientWidth,i.h=i.frame.clientHeight,a(i.w,i.h)}))}return Object(p.a)(e,[{key:"Aspect",value:function(){return this.w/this.h}},{key:"getCanvasRelativePosition",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}},{key:"setPickPosition",value:function(e){var t=this.pickPosition,n=this.getCanvasRelativePosition(e);t.x=n.x/this.w*2-1,t.y=n.y/this.h*-2+1}},{key:"clearPickPosition",value:function(){var e=this.pickPosition;e.x=-1e5,e.y=-1e5}},{key:"onmousemove",set:function(e){this.frame.onmousemove=e}},{key:"onmousedown",set:function(e){this.frame.onmousedown=e}},{key:"onmouseup",set:function(e){this.frame.onmouseup=e}},{key:"onclick",set:function(e){this.frame.onclick=e}}]),e}(),d=n(1),m=function(e,t){var n=this,o=-1,a=0,i=1,r=2,c=3,s=4;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:d.J.ROTATE,MIDDLE:d.J.ZOOM,RIGHT:d.J.PAN},this.target=new d.wb;var l=new d.wb,u=1,p=o,h=o,m=new d.wb,f=new d.vb,v=new d.vb,b=new d.wb,w=0,g=new d.vb,y=new d.vb,j=0,E=0,k=new d.vb,x=new d.vb;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var P={type:"change"},z={type:"start"},D={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}};var C=function(){var e=new d.vb;return function(t,o){return e.set((t-n.screen.left)/n.screen.width,(o-n.screen.top)/n.screen.height),e}}(),L=function(){var e=new d.vb;return function(t,o){return e.set((t-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-o))/n.screen.width),e}}();function O(e){if(!1!==n.enabled){if(e.preventDefault(),e.stopPropagation(),p===o)switch(e.button){case n.mouseButtons.LEFT:p=a;break;case n.mouseButtons.MIDDLE:p=i;break;case n.mouseButtons.RIGHT:p=r;break;default:p=o}var t=h!==o?h:p;t!==a||n.noRotate?t!==i||n.noZoom?t!==r||n.noPan||(k.copy(C(e.pageX,e.pageY)),x.copy(k)):(g.copy(C(e.pageX,e.pageY)),y.copy(g)):(v.copy(L(e.pageX,e.pageY)),f.copy(v)),document.addEventListener("mousemove",S,!1),document.addEventListener("mouseup",Y,!1),n.dispatchEvent(z)}}function S(e){if(!1!==n.enabled){e.preventDefault(),e.stopPropagation();var t=h!==o?h:p;t!==a||n.noRotate?t!==i||n.noZoom?t!==r||n.noPan||x.copy(C(e.pageX,e.pageY)):y.copy(C(e.pageX,e.pageY)):(f.copy(v),v.copy(L(e.pageX,e.pageY)))}}function Y(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),p=o,document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",Y),n.dispatchEvent(D))}function A(e){if(!1!==n.enabled&&!0!==n.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:g.y-=.025*e.deltaY;break;case 1:g.y-=.01*e.deltaY;break;default:g.y-=25e-5*e.deltaY}n.dispatchEvent(z),n.dispatchEvent(D)}}function R(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:p=c,v.copy(L(e.touches[0].pageX,e.touches[0].pageY)),f.copy(v);break;default:p=s;var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;E=j=Math.sqrt(t*t+o*o);var a=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;k.copy(C(a,i)),x.copy(k)}n.dispatchEvent(z)}}function M(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:f.copy(v),v.copy(L(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;E=Math.sqrt(t*t+o*o);var a=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;x.copy(C(a,i))}}function X(e){if(!1!==n.enabled){switch(e.touches.length){case 0:p=o;break;case 1:p=c,v.copy(L(e.touches[0].pageX,e.touches[0].pageY)),f.copy(v)}n.dispatchEvent(D)}}function F(e){!1!==n.enabled&&e.preventDefault()}this.rotateCamera=function(){var e,t=new d.wb,o=new d.eb,a=new d.wb,i=new d.wb,r=new d.wb,c=new d.wb;return function(){c.set(v.x-f.x,v.y-f.y,0),(e=c.length())?(m.copy(n.object.position).sub(n.target),a.copy(m).normalize(),i.copy(n.object.up).normalize(),r.crossVectors(i,a).normalize(),i.setLength(v.y-f.y),r.setLength(v.x-f.x),c.copy(i.add(r)),t.crossVectors(c,m).normalize(),e*=n.rotateSpeed,o.setFromAxisAngle(t,e),m.applyQuaternion(o),n.object.up.applyQuaternion(o),b.copy(t),w=e):!n.staticMoving&&w&&(w*=Math.sqrt(1-n.dynamicDampingFactor),m.copy(n.object.position).sub(n.target),o.setFromAxisAngle(b,w),m.applyQuaternion(o),n.object.up.applyQuaternion(o)),f.copy(v)}}(),this.zoomCamera=function(){var e;p===s?(e=j/E,j=E,n.object.isPerspectiveCamera?m.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom*=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(y.y-g.y)*n.zoomSpeed)&&e>0&&(n.object.isPerspectiveCamera?m.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom/=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?g.copy(y):g.y+=(y.y-g.y)*this.dynamicDampingFactor)},this.panCamera=function(){var e=new d.vb,t=new d.wb,o=new d.wb;return function(){if(e.copy(x).sub(k),e.lengthSq()){if(n.object.isOrthographicCamera){var a=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,i=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;e.x*=a,e.y*=i}e.multiplyScalar(m.length()*n.panSpeed),o.copy(m).cross(n.object.up).setLength(e.x),o.add(t.copy(n.object.up).setLength(e.y)),n.object.position.add(o),n.target.add(o),n.staticMoving?k.copy(x):k.add(e.subVectors(x,k).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(m.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,m.setLength(n.maxDistance)),g.copy(y)),m.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,m.setLength(n.minDistance)),g.copy(y)))},this.update=function(){m.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,m),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),l.distanceToSquared(n.object.position)>1e-6&&(n.dispatchEvent(P),l.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(l.distanceToSquared(n.object.position)>1e-6||u!==n.object.zoom)&&(n.dispatchEvent(P),l.copy(n.object.position),u=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){p=o,h=o,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),m.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(P),l.copy(n.object.position),u=n.object.zoom},this.dispose=function(){this.domElement.removeEventListener("contextmenu",F,!1),this.domElement.removeEventListener("mousedown",O,!1),this.domElement.removeEventListener("wheel",A,!1),this.domElement.removeEventListener("touchstart",R,!1),this.domElement.removeEventListener("touchend",X,!1),this.domElement.removeEventListener("touchmove",M,!1),document.removeEventListener("mousemove",S,!1),document.removeEventListener("mouseup",Y,!1)},this.attachCallback=function(){this.domElement.addEventListener("contextmenu",F,!1),this.domElement.addEventListener("mousedown",O,!1),this.domElement.addEventListener("wheel",A,!1),this.domElement.addEventListener("touchstart",R,!1),this.domElement.addEventListener("touchend",X,!1),this.domElement.addEventListener("touchmove",M,!1)},this.attachCallback(),this.handleResize(),this.update()};(m.prototype=Object.create(d.q.prototype)).constructor=m;var f=n(48),v=function(e){var t=Object(o.useState)(),n=Object(s.a)(t,2),a=n[0],i=n[1];return Object(o.useEffect)((function(){i(function(){var e=document.getElementById("canvas-frame");if(null===e)return;var t=new d.jb,n=new d.yb({antialias:!0,powerPreference:"high-performance"}),o=new h(e,n.domElement,n,(function(){s()})),a=new d.Z(75,o.Aspect(),.1,1e3),i=new d.jb,r=new d.Z(75,o.Aspect(),.1,1e3),c=.1;n.setSize(o.w,o.h),n.setClearColor(4473924,1),a.position.z=5,r.position.z=5;var s=function(){console.log(o.w,o.h)},u=new m(a,e);u.target.set(0,0,0),u.rotateSpeed=8,u.noPan=!1,u.maxDistance=60,u.keys=[],u.dispose();var p=new d.a(4210752);t.add(p);var v=new d.ab(16777215,1,100);v.position.set(10,10,10),t.add(v);var b=new d.ab(16777215,1,200);b.position.set(-40,20,20),t.add(b);var w=new d.ab(16777215,1,200);w.position.set(-40,-20,-20),t.add(w);var g=new d.ab(16777215,1,200);g.position.set(-20,10,-10),t.add(g);var y=new Array,j=null,E=new d.t,k=new Array,x=new d.wb(2,2,2);t.add(E),function e(o){requestAnimationFrame(e),n.autoClear=!0,n.render(t,a),n.autoClear=!1,n.render(i,r),u.update()}();var P=new d.t;t.add(P);var z=function(e,t,n,o,a){var i=new d.t,r=new d.n(.015,.015,e||t||n,3),c=new d.O({color:o}),s=new d.N(r,c);s.position.set(e/2,t/2,n/2);var l=new d.l(.05,.1,6),u=new d.O({color:o});s.userData={name:a,color:o,axis:new d.wb(e,t,n)};var p=new d.N(l,u);p.position.set(e,t,n);var h=p.position.clone().normalize();return p.rotation.set(h.z*Math.PI/2,h.y*Math.PI/2,-h.x*Math.PI/2),p.userData={name:a,color:o,axis:new d.wb(e,t,n)},s.rotation.set(h.z*Math.PI/2,h.y*Math.PI/2,-h.x*Math.PI/2),i.userData={name:a,color:o,axis:new d.wb(e,t,n)},i.add(s,p),i},D=z(.6,0,0,16776960,"x");P.add(D);var C=z(0,.6,0,16711935,"y");P.add(C);var L=z(0,0,.6,43775,"z");P.add(L);var O=new d.t;i.add(O);var S=z(1,0,0,16776960);O.add(S);var Y=z(0,1,0,16711935);O.add(Y);var A=z(0,0,.5,43775);O.add(A),O.position.set(-6*o.Aspect(),-6,-4.6);var R=new d.hb,M=null;R.params.Line={threshold:5};var X=!1,F={x:0,y:0,update:function(e){var t=new d.wb(e.x-F.x,e.y-F.y);return F.x=e.x,F.y=e.y,t},clone:function(){return{x:F.x,y:F.y}}},T=function(e){M&&(M.children[0].material.color.set(e),M.children[1].material.color.set(e))};e.onmousedown=function(e){console.log("On mouse down"),X=!0,o.setPickPosition(e),F.update(o.pickPosition),R.setFromCamera(o.pickPosition,a);var t=R.intersectObjects(P.children,!0);null!==M&&(T(M.userData.color),M=null),t.length&&(u.enabled=!1,M=t[0].object.parent,T(16777215))};var N=new Set;e.onclick=function(e){o.setPickPosition(e),R.setFromCamera(o.pickPosition,a);var t=R.intersectObjects(E.children);if(t.length){e.ctrlKey||(N.forEach((function(e){var t=e.material;t.color=new d.k(10066329),t.reflectivity=1})),N.clear()),N.add(t[0].object);var n=t[0].object.material;n.color=new d.k(12272895),n.reflectivity=1.4;var i=t[0].object.position;P.position.set(i.x,i.y,i.z)}};var I=new d.hb;function q(e){if(null!==j){for(x=e;E.children.length;)E.remove(E.children[0]);var t=(new d.d).setFromObject(j);console.log(t);var n=function(e,t){return 0===e||e===t};y=function(e,t,n){for(var o=t.max.clone().sub(t.min),a=new Array,i=0;i<e.x+1;++i){a[i]=new Array;for(var r=0;r<e.y+1;++r){a[i][r]=new Array;for(var c=0;c<e.z+1;++c)a[i][r][c]=new d.wb(o.x/e.x*i,o.y/e.y*r,o.z/e.z*c),a[i][r][c].add(t.min),n(a[i][r][c],[i,r,c])}}return a}(e,t,(function(t,o){if(n(o[0],e.x)||n(o[1],e.y)||n(o[2],e.z)){var a=new d.ob(.042,16,16),i=new d.P({color:11184810}),r=new d.N(a,i);r.position.set(t.x,t.y,t.z),r.userData={xyz:o},E.add(r)}}))}}function Z(e,t){for(var n=e,o=e;o++<t;)n*=o;return n}function B(e,t){return e===(t=t<e-t?e-t:t)?1:Z(t+1,e)/Z(1,e-t)}function H(e,t,n,o,a,i,r){for(var s=Math.pow,l=new d.wb(0,0,0),u=0;u<=e;++u)for(var p=0;p<=t;++p)for(var h=0;h<=n;++h){var m=B(e,u)*s(1-o,e-u)*s(o,u)*B(t,p)*s(1-a,t-p)*s(a,p)*B(n,h)*s(1-i,n-h)*s(i,h);l.add(r[u][p][h].clone().multiplyScalar(m))}return l.multiplyScalar(1/c),l}function V(){var e,t=Object(l.a)(k);try{for(t.s();!(e=t.n()).done;){for(var n=e.value,o=n.stu,a=new Float32Array(o.length),i=n.object.geometry.attributes.position,r=0;r<o.length;r+=3){var c=H(x.x,x.y,x.z,o[r],o[r+1],o[r+2],y);a[r]=c.x,a[r+1]=c.y,a[r+2]=c.z}i.set(a),i.needsUpdate=!0}}catch(s){t.e(s)}finally{t.f()}}e.onmousemove=function(e){if(null!==M&&X&&N.size){o.setPickPosition(e);var t=F.update(o.pickPosition);if(0!==t.length()){var n=M.userData.axis,i=n.clone().project(a);i.z=0,I.setFromCamera(o.pickPosition,a);var r=i.dot(t)/i.length()*(.6/i.length())*.76,c=n.clone().multiplyScalar(r);P.position.add(c),N.forEach((function(e){e.position.add(c);var t=e.position,n=e.userData.xyz;y[n[0]][n[1]][n[2]].set(t.x,t.y,t.z)})),V()}}},e.onmouseup=function(e){X=!1,u.enabled=!0,null!==M&&(T(M.userData.color),M=null)};var W=new d.d;function G(e,t){for(var n=new Float32Array(e.length),o=t.max.clone().sub(t.min),a=0;a<e.length;++a)n[a]=(e[a]-t.min.x)/o.x,n[++a]=(e[a]-t.min.y)/o.y,n[++a]=(e[a]-t.min.z)/o.z;return n}function J(e){k.push({object:e,stu:G(e.geometry.attributes.position.array,W)})}var Q=new f.a,U=null,$=function(e,n){Q.load(e,(function(e){j&&t.remove(j),c=n,W.setFromObject(e.scene),e.scene.scale.set(n,n,n),t.add(e.scene),j=e.scene,k=[],e.scene.traverse((function(e){e instanceof d.N&&e.geometry instanceof d.h&&J(e)})),U&&t.remove(U);var o=new d.f(e.scene,new d.k(11154248));o.update(),t.add(o),U=o,q(x)}))},K=function(e){if("book"===e)$("./book/scene.gltf",.1);else if("car"===e)$("./car/scene.gltf",.003);else{U&&t.remove(U),j&&t.remove(j);var n=new d.Q({color:2200782,metalness:.5,roughness:.6}),o=null;if("sphere"===e)o=new d.nb(.5,64,64);else if("cube"===e)o=new d.e(1,1,1,8,8,8);else if("cylinder"===e)o=new d.m(.5,.5,1,32);else{if("donut"!==e)return;o=new d.sb(.5,.25,16,100)}var a=new d.N(o,n);W.setFromObject(a),j=a,q(x),k=[],J(a),c=1,t.add(a)}};return K("book"),u.attachCallback(),{updateCtrlDims:function(e,t,n){return q(new d.wb(e,t,n))},updateScene:function(e){return K(e)},reset:function(){q(x),V()}}}())}),[]),Object(o.useEffect)((function(){if(a){var t=e.ctrlPointsDims;a.updateCtrlDims.apply(a,Object(c.a)(t))}}),[e.ctrlPointsDims]),Object(o.useEffect)((function(){a&&a.updateScene(e.scene)}),[e.scene]),null};var b=n(111),w=n(7),g=n(104),y=Object(w.a)({root:{color:"#52af77",height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus,&:hover,&$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(b.a),j=Object(g.a)((function(e){return{root:{flexGrow:1},Right:{maxHeight:"100vh",overflowY:"scroll",paddingLeft:20,paddingTop:e.spacing(2)},slider:{display:"inline"},sliderGroup:{marginTop:e.spacing(3)}}})),E=function(e){var t=Object(o.useRef)(null),n=Object(o.useRef)(null);return Object(o.useEffect)((function(){t.current&&n.current&&(t.current.style.width=n.current.style.width)}),[]),a.a.createElement("div",{ref:n,className:"canvas-frame-wrapper"},a.a.createElement("div",{ref:t,id:"canvas-frame",className:"canvas-frame"}),e.children)},k=n(105),x=n(107),P=n(110),z=n(109),D=n(106),C=n(108),L=["Lattice X","Lattice Y","Lattice Z"],O=["book","car","sphere","cube","donut"],S=function(){var e=j(),t=Object(o.useState)([2,2,2]),n=Object(s.a)(t,2),i=n[0],r=n[1],l=Object(o.useState)(0),u=Object(s.a)(l,2),p=u[0],h=u[1];return a.a.createElement("div",{className:"App"},a.a.createElement(k.a,{container:!0,className:e.root},a.a.createElement(k.a,{item:!0,xs:9},a.a.createElement(E,null,a.a.createElement(v,{ctrlPointsDims:i,scene:O[p]}))),a.a.createElement(k.a,{item:!0,xs:3,className:e.Right},a.a.createElement(D.a,{variant:"filled",fullWidth:!0},a.a.createElement(P.a,{htmlFor:"filled-scene"},"Scene"),a.a.createElement(C.a,{value:p,onChange:function(e){return h(e.target.value)},inputProps:{name:"scene",id:"filled-scene"}},O.map((function(e,t){return a.a.createElement(z.a,{key:t,value:t},e)})))),a.a.createElement("div",{className:e.sliderGroup},i.map((function(e,t){return a.a.createElement("div",{style:{textAlign:"left"},key:t},a.a.createElement(x.a,{display:"inline"},L[t]),a.a.createElement(y,{valueLabelDisplay:"auto",onChangeCommitted:function(e,n){var o=Object(c.a)(i);o[t]=Number(n),r(o)},defaultValue:2,min:1,max:10}))}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[54,1,2]]]);
//# sourceMappingURL=main.cb88ebfd.chunk.js.map